(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const A="/wot-landing/assets/tank-1-voZaO72d.png";function W(o){const n=document.createElement("div");if(n.className="tank-card",n.innerHTML=`
      <img src="${A}" alt="${o.tank.name}" class="tank-card__image">
      <h3 class="tank-card__name">${o.tank.name}</h3>
  `,window.innerWidth<=768)n.addEventListener("click",e=>{o.onClick(o.tank,n,e,o.index)});else{let e,t=!1;n.addEventListener("mouseenter",()=>{t=!0,clearTimeout(e),e=window.setTimeout(()=>{t&&o.onHover(o.tank,n,o.index)},150)}),n.addEventListener("mouseleave",()=>{t=!1,clearTimeout(e)})}return n}function H(o){const n=document.createElement("div");n.className="tanks-block";const a=document.createElement("div");return a.className="tanks-block__grid",o.tanks.forEach((e,t)=>{const s=W({tank:e,isSelected:o.selectedTank?.id===e.id,onClick:o.onTankSelect,onHover:o.onTankHover,index:t});a.appendChild(s)}),n.appendChild(a),n}const y=(o,n)=>{const a=o*3;let e=0;n==="Элитная"?e=.1:n==="Премиум"&&(e=.2);const t=Math.round(a*e),s=a+t;return{baseExperience:a,bonusMultiplier:e,bonusExperience:t,totalExperience:s}},$=(o,n,a,e)=>{const t=e?.gap,s=e?.margin,l=n.getBoundingClientRect(),d=o.getBoundingClientRect(),r=window.innerWidth,c=Math.floor(a/3);let i;c===0?i="top":i="bottom";let u,g;const h=a%3;h===0?(u="left",g=95):h===1?(u="center",g=d.width/2):(u="right",g=d.width-95);const m=l.left+l.width/2;let f=m-g;f=Math.max(s,Math.min(f,r-d.width-s));let p;i==="top"?p=l.bottom+t:p=l.top-d.height-t;const v=m-f;return{left:Math.round(f),top:Math.round(p),arrowLeft:Math.round(v),vertical:i,arrowSide:u}},q=(o,n)=>{o.style.position="absolute",o.style.left=`${n.left}px`,o.style.top=`${n.top}px`,o.style.setProperty("--arrow-left",`${n.arrowLeft}px`);const a=o.parentElement;a?.classList.remove("tank-widget--arrow-top","tank-widget--arrow-bottom"),n.vertical==="top"?a?.classList.add("tank-widget--arrow-top"):a?.classList.add("tank-widget--arrow-bottom")};function T(o,n,a){const e=document.createElement("div");e.className="battles-experience";const t=document.createElement("h2");t.className="battles-subtitle",t.textContent="Опыт танка",e.appendChild(t);const s=document.createElement("div");s.className="battles-experience-container";const l=document.createElement("div");l.className="star-image";const d=document.createElement("h1");d.className="battles-experience-text",d.textContent=`${n.experience}`,s.appendChild(l),s.appendChild(d),e.appendChild(s),o.appendChild(e);const r=c=>{parseInt(d.textContent||"0")!==c&&(l.classList.add("star-image--animated"),d.classList.add("battles-experience-text--changing"),d.textContent=`${c}`,setTimeout(()=>{l.classList.remove("star-image--animated"),d.classList.remove("battles-experience-text--changing")},500))};return e.update=r,e.cleanup=()=>{},e}const x=(o,n=300)=>{const a=Math.max(0,Math.min(o,n));return Math.round(a)};function _(o,n,a){const e=window.innerWidth<=768,t=document.createElement("div");t.className="battles-progress";const s=document.createElement("h2");s.className="battles-subtitle",s.textContent="Количество боёв",t.appendChild(s);const l=document.createElement("div");l.className="battles-progress-container",t.appendChild(l);const d=document.createElement("div");d.className="battles-progress-bar";const r=document.createElement("div");r.className="battles-progress-fill";const c=document.createElement("div");c.className="battles-progress-thumb",c.tabIndex=0,c.setAttribute("role","slider"),c.setAttribute("aria-valuenow",n.battles.toString()),c.setAttribute("aria-valuemin","0"),c.setAttribute("aria-valuemax","300"),d.appendChild(r),l.appendChild(d),l.appendChild(c);const i=v=>{const w=Math.min(100,v/300*100);r.style.width=`${w}%`;const b=22+w/100*(e?216:301);c.style.left=`${b}px`,c.setAttribute("aria-valuenow",v.toString())};i(n.battles);const u=v=>{if(v.key==="ArrowLeft"||v.key==="ArrowRight"){v.preventDefault();const w=v.key==="ArrowLeft"?-5:5,b=x(n.battles+w,300);a({battles:b})}};c.addEventListener("keydown",u);let g=!1;const h=v=>{g=!0,c.style.cursor="grabbing",document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),v.preventDefault()},m=v=>{if(!g)return;const w=d.getBoundingClientRect();let b=v.clientX-w.left;b=Math.max(0,Math.min(b,w.width));const C=b/w.width,E=Math.round(C*300),k=x(E,300);a({battles:k})},f=()=>{g=!1,c.style.cursor="grab",document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)};c.addEventListener("mousedown",h);const p=v=>{i(v)};return t.update=p,t.cleanup=()=>{c.removeEventListener("keydown",u),c.removeEventListener("mousedown",h),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)},o.appendChild(t),t}function M(o,n,a){const e=document.createElement("div");e.className="radio";const t=document.createElement("h3");t.className="battles-subtitle",t.textContent="Комплектация",e.appendChild(t);const s=["Стандартная","Элитная","Премиум"],l=document.createElement("div");l.className="radio-list";const d=[];s.forEach(i=>{const u=r(i,n.selectedConfiguration);l.appendChild(u)}),e.appendChild(l),o.appendChild(e);function r(i,u){const g=document.createElement("div");g.className=`radio-item ${i===u?"radio-item--selected":""}`,g.innerHTML=`
      <div class="radio-radio">
        <input type="radio" name="radio" value="${i}" ${i===u?"checked":""}>
        <span class="radio-custom"></span>
      </div>
      <span class="radio-name">${i}</span>
    `;const h=g.querySelector("input"),m=()=>{a({selectedConfiguration:i}),c()};return h.addEventListener("change",m),d.push(()=>{h.removeEventListener("change",m)}),g}function c(){e.querySelectorAll(".radio-item").forEach(u=>{const h=u.querySelector("input").value;u.classList.toggle("radio-item--selected",h===n.selectedConfiguration)})}return e.cleanup=()=>{d.forEach(i=>i())},e}function N(o,n,a){const e=document.createElement("input");e.className="battles-input",e.type="number",e.value=n.battles.toString(),e.min="0",e.max="300",e.step="5";const t=r=>{const c=r.target;let i=parseInt(c.value)||0;i>300?(i=300,c.value="300"):(i<0||isNaN(i))&&(i=0,c.value="0");const u=x(i,300);a({battles:u})},s=r=>{if(r.key==="ArrowUp"||r.key==="ArrowDown"){r.preventDefault();const c=r.key==="ArrowUp"?5:-5,i=parseInt(e.value)||0,u=x(i+c,300);e.value=u.toString(),a({battles:u})}/[\d]|Backspace|Delete|Tab|Escape|ArrowLeft|ArrowRight|Enter/.test(r.key)||r.preventDefault()},l=()=>{let r=parseInt(e.value)||0;r>300?(r=300,e.value="300"):r<0&&(r=0,e.value="0");const c=x(r,300);a({battles:c})},d=r=>{const c=r.target;let i=parseInt(c.value)||0;const u=x(i,300);a({battles:u})};return e.addEventListener("input",t),e.addEventListener("keydown",s),e.addEventListener("blur",l),e.addEventListener("change",d),e.update=r=>{parseInt(e.value)!==r&&(e.value=r.toString())},e.cleanup=()=>{e.removeEventListener("input",t),e.removeEventListener("keydown",s),e.removeEventListener("blur",l),e.removeEventListener("change",d)},o.appendChild(e),e}function D(o){const n=document.createElement("div");n.className="tank-widget";const a=window.innerWidth<=768;a?n.innerHTML=`
            <div class="tank-widget__content" role="dialog" aria-modal="true">
                <div class="tank-widget__header">
                    <h2 class="tank-widget__name">${o.tank.name}</h2>
                    <button class="tank-widget__close" aria-label="Close tank information">&times;</button>
                </div>
                <div class="tank-widget__body"></div>
            </div>
        `:n.innerHTML=`
            <div class="tank-widget__content" role="dialog" aria-modal="true">
                <div class="tank-widget__body"></div>
            </div>
        `;const e=n.querySelector(".tank-widget__content"),t=n.querySelector(".tank-widget__body"),s=[];let l=null,d=null,r=null;if(a){const m=n.querySelector(".tank-widget__close");m&&(m.addEventListener("click",o.onClose),s.push(()=>m.removeEventListener("click",o.onClose)))}const c=m=>{m.key==="Escape"&&o.onClose()};document.addEventListener("keydown",c),s.push(()=>document.removeEventListener("keydown",c));let i={...o.state};const u=m=>y(m.battles,m.selectedConfiguration).totalExperience,g=m=>{i={...i,...m};const f=u(i);i.experience=f,o.onStateChange({...m,experience:f}),m.battles!==void 0&&(l&&l.update&&l.update(i.battles),d&&d.update&&d.update(i.battles)),r&&r.update&&r.update(i.experience)};a?(M(t,i,g),l=_(t,i,g),d=N(t,i,g),t.insertAdjacentHTML("beforeend",'<div class="divider"></div>'),r=T(t,i)):(M(t,i,g),r=T(t,i),l=_(t,i,g),d=N(t,i,g));const h=u(i);if(i.experience=h,o.onStateChange({experience:h}),r&&r.update&&r.update(h),l.cleanup&&s.push(l.cleanup),d.cleanup&&s.push(d.cleanup),r.cleanup&&s.push(r.cleanup),requestAnimationFrame(()=>{n.classList.add("tank-widget--visible")}),!a){const m=()=>{const p=$(e,o.targetEl,o.index,{gap:20,margin:20});q(e,p)},f=()=>{m()};window.addEventListener("resize",f),window.addEventListener("scroll",f,!0),s.push(()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0),n.cardMouseLeaveHandler&&o.targetEl&&o.targetEl.removeEventListener("mouseleave",n.cardMouseLeaveHandler)}),n.__position=m}return n.__cleanup=()=>{s.forEach(m=>m())},n}const I=[{id:"1",name:"T-34",model:"Т-34-85",image:"/src/assets/tank-1.png",type:"Средний танк",nation:"СССР",tier:6,configuration:"Стандартная",battles:330,experience:752,maxBattles:1e3},{id:"2",name:"KV-1",model:"КВ-1",image:"/src/assets/tank-1.png",type:"Тяжёлый танк",nation:"СССР",tier:5,configuration:"Стандартная",battles:215,experience:543,maxBattles:1e3},{id:"3",name:"T-150",model:"Т-150",image:"/src/assets/tank-1.png",type:"Тяжёлый танк",nation:"СССР",tier:6,configuration:"Стандартная",battles:178,experience:421,maxBattles:1e3},{id:"4",name:"IS",model:"ИС",image:"/src/assets/tank-1.png",type:"Тяжёлый танк",nation:"СССР",tier:7,configuration:"Стандартная",battles:89,experience:287,maxBattles:1e3},{id:"5",name:"T-44",model:"Т-44",image:"/src/assets/tank-1.png",type:"Средний танк",nation:"СССР",tier:8,configuration:"Стандартная",battles:156,experience:634,maxBattles:1e3},{id:"6",name:"SU-100",model:"СУ-100",image:"/src/assets/tank-1.png",type:"ПТ-САУ",nation:"СССР",tier:6,configuration:"Стандартная",battles:267,experience:598,maxBattles:1e3}],R="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",L={selectedTank:I[0],selectedConfiguration:"Стандартная",battles:130,experience:0,maxBattles:300,showWidget:!1};L.experience=y(L.battles,L.selectedConfiguration).totalExperience;function P(o){let n={...L},a=null,e=null,t=null;const s=window.innerWidth<=768,l=document.createElement("section");l.className="tanks-section",o.appendChild(l);const d=p=>{n={...n,...p}},r=()=>{if(!a){d({showWidget:!1,selectedTank:null});return}a.__cleanup?.(),a.classList.remove("tank-widget--visible"),setTimeout(()=>{a&&(a.remove(),a=null),d({showWidget:!1,selectedTank:null}),t=null},300)},c=()=>{e&&clearTimeout(e),e=window.setTimeout(()=>{r()},1e11)},i=()=>{e&&(clearTimeout(e),e=null)},u=(p,v,w,b)=>{s||i(),a&&(a.__cleanup?.(),a.remove(),a=null),s||(t=v);const C=y(p.battles,p.configuration).totalExperience;d({selectedTank:p,battles:p.battles,experience:C,selectedConfiguration:p.configuration,showWidget:!0}),setTimeout(()=>{if(a=D({tank:p,state:n,onStateChange:d,onClose:r,targetEl:v,index:w}),document.body.appendChild(a),!s){const E=a;if(E.addEventListener("mouseenter",()=>{i()}),E.addEventListener("mouseleave",k=>{E.contains(k.relatedTarget)||c()}),t){const k=S=>{E.contains(S.relatedTarget)||c()};t.addEventListener("mouseleave",k),a.cardMouseLeaveHandler=k}}s||requestAnimationFrame(()=>{a.__position?.()})},30)},g=(p,v,w,b)=>{u(p,v,b)},h=(p,v,w)=>{s||u(p,v,w)};(()=>{l.innerHTML="";const p=document.createElement("p");p.className="latin-text",p.textContent=R,l.appendChild(p);const v=H({tanks:I,selectedTank:n.selectedTank,onTankSelect:g,onTankHover:h});l.appendChild(v)})();const f=()=>{console.log("Window resized - please refresh to update interaction mode"),a&&r()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),a&&r()}}const B=document.getElementById("app");B?P(B):console.error("Root element #app not found");
